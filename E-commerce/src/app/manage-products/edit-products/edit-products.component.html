
@if(isOpen){
	<div class="esp-all">
		<div class="esp-side" (click)="$event.stopPropagation()">
			<div class="esp-header esp-shadow">
				@if(productSelected){
					<button [disabled]="!readonly" [class.readonly]="!readonly" (click)="editPanel()">Edit</button>
				}
				<button [disabled]="!readonly" [class.readonly]="!readonly" (click)="deleteProduct()">Delete</button>
				<button (click)="closePanel()" style="float: right;">X</button>
				@if (validatorService.errorList.length > 0) {
					<div class="description error">
						<ul>
						<button class="button-modal" (click)="validatorService.errorList = []">X</button>
						@for (error of validatorService.errorList; track $index) {
							<li>
								{{ error.message }};
							</li>
						}
						</ul>
					</div>
				}

				@if (showMessage != '') {
					<div class="description sucess">
						{{ showMessage }}
						<button class="button-modal" (click)="showMessage = ''">X</button>
					</div>
				}
				
			</div>
			<div class="esp-content">
				<div class="content">
					<h2>Product</h2>
					<form>
						<label>Title:</label>
						<input [class.readonly]="readonly" [readonly]="readonly" type="text" [(ngModel)]="productSelected.title" name="title" />
						<br>
						<label>Price:</label>
						<input [class.readonly]="readonly" [readonly]="readonly" type="number" min="0.00" step="0.01" placeholder="e.g., 9.99" [(ngModel)]="productSelected.price" name="price" />
						<br>
						<label>Description:</label>
						<textarea [class.readonly]="readonly" [readonly]="readonly" [(ngModel)]="productSelected.description" name="description"></textarea>
						<br>
						<label>Category:</label>
						<input  [class.readonly]="readonly"[readonly]="readonly" type="text" [(ngModel)]="productSelected.category" name="category" />
						<br>
						<label>Image URL:</label>
						<input [class.readonly]="readonly" [readonly]="readonly" type="url" src="productSelected.image" [(ngModel)]="productSelected.image" name="image" />
						@if(productSelected.image){
							<img [src]="productSelected.image" alt="Product Image" width="100" height="100"/>
						}
						
						<br>
					</form>
				</div>
			</div>
			<div class="esp-footer esp-shadow">
				<button (click)="closePanel()">Discard changes</button>
				<button (click)="saveProduct()">Save</button>
			</div>
		</div>
	</div>
}

